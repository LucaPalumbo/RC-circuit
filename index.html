<!DOCTYPE html>
<html>
    <head>
        <link rel = "stylesheet" type = "text/css" href = "./css/myStyle.css" />
        <link rel = "stylesheet" type = "text/css" href = "./css/collapsible.css" />
        <link rel = "stylesheet" type = "text/css" href = "./css/sidenav.css" />
        <link rel = "stylesheet" type = "text/css" href = "./css/arduino.css" />
        <link rel = "stylesheet" type = "text/css" href = "./css/code.css" />
        <link rel = "stylesheet" type = "text/css" href = "./css/tooltip.css" />

        <title>Circuiti RC</title>
    </head>
    <body>
        <!-- include MATHJAX script -->
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>
            MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };
        </script>
        <script id="MathJax-script" async
              src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
        </script>

        <!-- HEADER SECTION -->
        <div class="header">
            <h1>Circuiti RC</h1>
            <p>by Luca Palumbo</p>
        </div>

        <!-- CONTENT SECTION -->
        <button class="tablink" onclick="openPage('circuitiRC', this)" id="defaultOpen">Teoria</button>
        <button class="tablink" onclick="openPage('Arduino', this)">Arduino</button>
        <button class="tablink" onclick="openPage('Contact', this)">Contact</button>
        <button class="tablink" onclick="openPage('About', this)">About</button>

        <div id="circuitiRC" class="tabcontent" >
            <div class='subContainer'>
                <h2 class='subTitle'>Spiegazione e teoria</h2>

                <!-- SIDEBAR SECCTION -->
                <div class="sidenav">
                    <div>Indice:</div>
                    <a href="#cosasono">Cosa Sono</a>
                    <a href="#caricacondensatore">Carica condensatore</a>
                    <a href="#scaricacondensatore">Scarica condensatore</a>
                    <a href="#bilancioenergetico">Bilancio energetico</a>
                </div>
                <div id="cosasono">
                    <h3>Cosa sono?</h3>
                    <img class="imgTeoria" src="./img/circuitoRC.png" alt="circuito RC" >
                    <p class="p1">
                        Fino ad ora abbiamo utilizzato circuiti in condizioni
                        stazionarie, ovvero le cui grandezze fondamentali
                        (correnti, d.d.p., carica dei condensatori ) non
                        variano nel tempo. Un circuito RC &egrave; un esempio
                        di circuiti non stazionario. <br/>
                        Il circuito RC contiene, oltre a una batteria o
                        generatore di tensione, una o pi&ugrave; resistenze e
                        uno o pi&ugrave; condensatori.
                        Consideriamo il condensatore inizialmente scarico. <br/>
                        Attraverso l'interruttore S possiamo mettere in contatto
                        il condensatore con la batteria.
                    </p>
                    <br/>
                    <br/>
                    <img class="imgTeoria" src="./img/circuitoRCfasi.png" alt="fasi di un circuito RC">
                    <div id="p2">
                        <ul id="fasi">
                            <li>
                                <strong>Fase di Carica:</strong> mettiamo in contatto
                                l'interruttore S col punto a. La batteria inizia a
                                trasferire carica al condensatore finche la d.d.p
                                deltaV tra i piatti del condensatore non eguaglia la
                                f.e.m. della batteria.
                            </li>
                            <li>
                                <strong>Condensatore totalmente carico:</strong> a
                                carica completata la corrente cessa: il condensatore
                                carico interrompe il flusso della corrente.
                            </li>
                            <li>
                                <strong>Fase di scarica:</strong> scarichiamo il
                                condensatore collegando S col punto b: si genera
                                una corrente nella maglia chiysa che dissipa l'energia
                                del condensatore sulla resistenza R.
                            </li>
                        </ul>
                    </div>
                </div>
                <br/>
                <hr width="400px"/>
                <div id="caricacondensatore">
                    <h3>Processo di carica del condensatore</h3>
                    <img class="imgTeoria" src="./img/circuitoRC2.png" alt="circuito RC in carica">
                    <div class="p1">
                        In ogni istante del processo di carica, come nel caso statico
                        le equazioni della corrente sono date dalle leggi di Kirchoff.
                        La differenza è che in questo caso le grandezze sono variabili
                        nel tempo.<br/>
                        Sia $q(t)$ la carica, $\Delta V_c(t)$ la d.d.p ai piatti del
                        condensatore, e $i(t)$ la corrente nel circuito. Si ha:
                        $$fem = i(t)R + \Delta V_c(t)$$
                        La carica del condensatore continua fino a quando la
                        $\Delta V_c$ diventa uguale alla $fem$ del circuito.
                    </div>
                    <div class="p1">
                        Riscriviamo la equazione sostituendo $\Delta V_c(t)$ e $i(t)$
                        con la loro espressione in termini di carica:
                        $$i(t) = \frac{d q(t)}{dt}$$
                        $$\Delta V_c(t) = \frac{q(t)}{C} $$
                        $$\frac{dq(t)}{dt}R+\frac{q(t)}{C} = fem \hspace{1cm}(1)$$
                        Otteniamo un'equazione differenziale del 1° ordine che
                        descrive la variazione di carica ai piatti del condensatore.
                    </div>
                    <button class="collapsible">Svolgimento equazione</button>
                    <div class="content">
                      <div class="p1">
                        $$ \frac{dq}{dt}R+\frac{q}{C} = fem $$
                        $$ \frac{dq}{dt}+\frac{q}{RC} = \frac{fem}{R} $$
                        Quindi applico: $$ q(t)= e^{-A(t)}\Big[C_1+\int{\frac{fem}{R}\,e^{A(t)}\,dt}\Big] $$
                        con: $$ A(t)= \int{\frac{1}{RC}\,dt} = \frac{t}{RC} $$
                        Risolvo: $$ \int{\frac{fem}{R}e^{A(t)}\,dt} $$
                        $$ \int{\frac{fem}{R}e^{\,t/RC}\,dt} $$
                        $$ Cfem\int{\frac{1}{RC}e^{\,t/RC}\,dt} = Cfem\,e^{t/RC}$$
                        Quindi:
                        $$ q(t) = e^{-t/RC}\Big[C_1+Cfem\,e^{t/RC}\Big] $$
                        $$ q(t) = C_1e^{-t/RC}+Cfem $$
                        Conoscendo $ q(0) = 0$ ricavo:
                        $$ C_1e^{0}+Cfem = 0 $$
                        $$ C_1+Cfem = 0 $$
                        $$ C_1=-Cfem $$
                        Quindi:
                        $$ q(t) = Cfem -Cfem\,e^{-t/RC} $$
                        $$ q(t) = Cfem\Big[1-e^{-t/RC}\Big] $$
                      </div>
                    </div>
                    <div class="p1">
                        Una volta risolta l'equazione definiamo $\tau = RC$ ottenendo
                        : $$ q(t) = C  fem[1-e^{-t/\tau}] $$
                        $\tau$ prende il nome di <strong><font color ="#1abc9c" >costante
                        di tempo caratteristica</font></strong> e ha come untià di
                        misura i secondi.
                        $$ \Big[RC\Big] =\Omega F= \frac{V}{A}\frac{C}{V} = \frac{C}{A} = s $$
                        Quindi l'intensit&agrave; di corrente corrisponder&agrave; a:
                        $$ i(t) = \frac{dq}{dt} = \frac{C fem}{\tau}e^{-t/\tau} $$
                    </div>
                    <div class="box">
                      <img class="imgTeoria" src="./img/caricasutempo.png" alt="carica su tempo">
                      <div class="p3">
                        <strong>Grafico della carica sui piatti in funzione del tempo</strong>
                        $$q(t)=Cfem\Big[1-e^{-t/\tau}\Big]  $$
                        All’istante iniziale ($t=0$) $q=0$; la carica
                        aumenta esponenzialmente col tempo, e
                        dopo un tempo $t >> \tau$ raggiunge il valore di
                        equilibrio $q = Cfem$ ; a questo punto il
                        condensatore è totalmente carico.
                      </div>
                    </div>
                    <div class="box">
                      <img class="imgTeoria" src="./img/intensitasutempo.png" alt="corrente su tempo">
                      <div class="p3">
                        <strong>Grafico della corrente in funzione del tempo</strong>
                        $$i(t)=\frac{dq}{dt}=\frac{fem}{R}e^{-t/\tau} $$
                        All’instante iniziale $i(0)= E /R$; la corrente
                        diminuisce esponenzialmente nel
                        tempo; per $t >> \tau$ il condensatore è
                        totalmente carico e la corrente si annulla.
                        <br/><br/><br/>
                        <br/><br/><br/>
                        <br/><br/>
                      </div>
                    </div>
                    <div class="box">
                      <img class="imgTeoria" src="./img/ddpsutempo.png" alt="ddp su tempo">
                      <div class="p3">
                        <strong>Grafico della d.d.p. tra i piatti in funzione del tempo</strong>
                        $$i(t)=\frac{dq}{dt}=\frac{fem}{R}e^{-t/\tau} $$
                        A $t=0$ il condensatore è scarico e $\Delta V_C = 0$;
                        per $t >> \tau$ il condensatore è totalmente
                        carico e $\Delta V_C = fem$.
                      </div>
                    </div>


            </div>
            <div id="bilancioenergetico">
              <h3>Bilancio Energetico</h3>
              <div class="p1">
                <p>A carica completata, il bilancio energetico impone che
                l'<b>energia erogata dalla batteria</b> durante la carica $\Delta U_B$
                sia uguale all'<b>energia immagazzinata dal condensatore</b> $\Delta U_C$
                pi&ugrave; quella $\Delta U_R$ <b>dissipata sul resistore</b> $R$<br/>
                Verifichiamo questo assunto:</p>
                L’energia erogata dalla batteria è data dal prodotto della carica circolata nel
                circuito per la $fem$ della batteria; la carica $q$ circolata nel circuito durante il
                processo è ovviamente la stessa accumulata sui piatti del condensatore:
                $$ \Delta U_B = q\,fem = Cfem^2 $$
                $$ \Delta U_C  = \frac{1}{2}Cfem^2 $$
                $$ q = Cfem $$
                Dalla legge di Joule calcoliamo l'energia dissipata sul resistore:
                $$ P = i^2R = \frac{dU_R}{dt}$$
                $$
                 \Delta U_R = \int_0^\infty{i^2(t)R\,dt} = \frac{fem^2}{R}\int_0^\infty{e^{-2/\tau}\,dt}
                  = \frac{fem^2}{R}\frac{\tau}{2} = \frac{1}{2}Cfem^2
                $$
                $$ \Delta U_B = \Delta U_C + \Delta U_R$$
              </div>
            </div>
            <div id="scaricacondensatore">
              <h3>Scarica Condensatore</h3>

              <div class="box1">
                <img class="imgTeoria" src="./img/circuitoRCscarica.png" alt="circuitiRCscarica.png">
                <div class="p1">
                  <br/>
                  <p>Partiamo dal condensatore carico, con
                  carica iniziale $ q_0 = Cfem $ </p>
                  Chiudiamo il circuito in modo che il condensatore scarichi
                  la sua energia sul resistore $R$; ipotizziamo il verso della
                  corrente in figura; la $2°$ legge di Kichoff d&aacute;:
                </div>
              </div>
              <div class="box1">
                $$ (V_b-V_c)+(V_c-V_b) = 0 $$
                $$ iR+ \Delta V_C = 0 $$
                $$ \frac{dq(t)}{dt}R + \frac{q(t)}{C} = 0 $$
              </div>
              <div class="p1">Si dimostra che la soluzione dell’equazione differenziale è:</div>
              $$q(t) = q_0 e^{-t/\tau} $$
              $$ i(t) = \frac{dq}{dt} = - \frac{q_0}{\tau} e^{-t/\tau} $$

            </div>
        </div>
      </div>

        <div id="Arduino" class="tabcontent">
          <div class='subContainer'>
            <h2 class='subTitle'>Verifica sperimentale con arduino</h2>
            <div class="sidenav">
                <div>Indice:</div>
                <a href="#raccoltadati">Raccolta dati con Arduino</a>
                <a href="#root">Analisi dati con root</a>
                <a href="#python">Analisi dati con python</a>
            </div>
            <div class="p1">
              &Egrave; possibile verificare sperimentalmente ci&ograve; che abbiamo imparato
              nella sezione teoria utilizzando un microcontrollore e assemblando un circuito RC.<br/>
              Necessario:
              <ul>
                <li><a href="https://store.arduino.cc/arduino-uno-rev3"  target=”_blank”>Arduino</a></li>
                <li><a href="https://it.rs-online.com/web/c/passivi/condensatori/condensatori-elettrolitici/"  target=”_blank”>Condensatore</a></li>
                <li><a href="https://it.rs-online.com/web/c/passivi/resistori/"  target=”_blank”>Resistore </a> </li>
              </ul>
            </div>
            <div id="raccoltadati">
              <h3>Raccolta dati con Arduino</h3>
              <div class="p1">
                Utilizziamo il nostro arduino per costruire un circuito RC che somigli a questo.
                <div class="tooltip">
                  <a href="https://ludusrusso.cc/2017/02/21/un-laboratorio-di-fisica-con-python-e-arduino-circuito-rc-v2/">
                    <img src="./img/circuitoarduino.PNG" alt="arduino" class="arduinoimg" width="100%">
                    <span class="tooltiptext">Immagine da: https://ludusrusso.cc/</span>
                  </a>
                </div>
                Io utilizzer&ograve; un resistore da $ 1\cdot 10^{-6} \Omega$ e un condensatore con capacità $ 1 \cdot 10^6 F $ <br/>
                A questo punto non ci resta che scaricare l'IDE di Arduino, scrivere il codice, collegare
                il microcontrollore al computer ed eseguire il programma. <br/>
                Ecco un esempio di codice arduino per raccogliere dati:
                <pre>
                <code>int tau;
int R;

int experiment_counter;
void setup() {
  // put your setup code here, to run once:
  tau = 1; // tau = 1 second
  R = 1e6; // R = 1e6 ohm
  experiment_counter = 0;
  int bps = 9600; // velocità, espressa in bps (boud rate per secondo).
  Serial.begin(bps);
  pinMode(2,OUTPUT); // set pin mode of second pin to OUTPUT

  //make sure there is no tension in the capacitor at the beginning of experiment
  digitalWrite(2, LOW); // turn OFF battery
  delay(6*1000); // wait 6 seconds

}

void charge(){
  digitalWrite(2, HIGH); //// turn ON battery
  Serial.print("Experiment n. ");
  Serial.print(experiment_counter);
  Serial.print("\n");
  unsigned long startChargingTime = millis();
  unsigned long chargeTime = startChargingTime;
  int seconds = 6;
  while(chargeTime < startChargingTime+seconds*1000){
     int sensorValue = analogRead(A0); //read tension
     float voltage = sensorValue * (5.0 / 1023.0); // Convert the analog reading (which goes from 0 – 1023) to a voltage (0 – 5V)
     chargeTime = millis(); //get current time
     Serial.print(chargeTime-startChargingTime); // print charging time
     Serial.print(" ");
     Serial.print(voltage); //print voltage
     Serial.print("\n");
     delay(100); //wait 100ms
  }

}

void discharge(){
  digitalWrite(2, LOW); // turn OFF battery
  int seconds = 6;
  Serial.println("Discharging...");
  unsigned long startDischargingTime = millis();
  unsigned long dischargeTime = startDischargingTime;
  while(dischargeTime < startDischargingTime+seconds*1000){
    int sensorValue = analogRead(A0); //read tension
    float voltage = sensorValue * (5.0 / 1023.0); // Convert the analog reading (which goes from 0 – 1023) to a voltage (0 – 5V)
    dischargeTime = millis();
    Serial.print(dischargeTime-startDischargingTime); // print charging time
     Serial.print(" ");
     Serial.print(voltage); //print voltage
     Serial.print("\n");
     delay(100); //wait 100ms
  }

}

void stop(){
  Serial.println("Stopping sketch");
  while(1);
}

void loop() {
  // put your main code here, to run repeatedly:
  charge();
  discharge();
  experiment_counter++;
  if(experiment_counter==50){
    stop();
  }
}


                </code>
              </pre>
              <div>

                <form method="get" action="./code/raccoltadati.ino" class="buttonBox">
                      <button class="button" type="submit">Download sketch!</button>
                </form>
                <form method="get" action="./code/capacitor_data.txt" class="buttonBox">
                      <button class="button" type="submit">Download dati raccolti</button>
                </form>
              </div>

              </div>
            </div>
          </div>


        </div>

        <div id="Contact" class="tabcontent">
            <h3>Contact</h3>
            <p>Get in touch, or swing by for a cup of coffee.</p>
        </div>

        <div id="About" class="tabcontent">
            <h3>About</h3>
            <p>Who we are and what we do.</p>
        </div>




        <!-- SCRIPT SECTION -->
        <script>
            function openPage(pageName,elmnt) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablink");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].style.backgroundColor = "";
            }
            document.getElementById(pageName).style.display = "block";
            //elmnt.style.backgroundColor = '#f7642f';
            elmnt.style.backgroundColor = '#1abc9c';
        }

            // Get the element with id="defaultOpen" and click on it
            document.getElementById("defaultOpen").click();
        </script>
        <script>
            var coll = document.getElementsByClassName("collapsible");
            var i;

            for (i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var content = this.nextElementSibling;
                if (content.style.maxHeight){
                content.style.maxHeight = null;
                } else {
                content.style.maxHeight = content.scrollHeight + "px";
                }
            });
            }
        </script>

    </body>
</html>
